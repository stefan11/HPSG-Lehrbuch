%% -*- coding:utf-8 -*-
\documentclass[output=book,
               smallfont
%                ,series=tbls,
%		,modfonts
%		,nonflat
%		,multiauthors
%	        ,collection
%	        ,collectionchapter
%	        ,collectiontoclongg
 	        ,biblatex
                ,decapbib
%                ,babel
                ,booklanguage=german
%                ,babelshorthands
%                ,showindex
                ,newtxmath
%                ,colorlinks, citecolor=brown % for drafts
                ,draftmode
% 	        ,coverus
                ,uniformtopskip
                ,tblseight % to get the fonts for the Chinese title of GT
		  ]{langscibook} 

%\renewcommand{\lsBookLanguage}{german}

\usepackage{ifthen}
\provideboolean{draft}
\setboolean{draft}{false}

%\newtoggle{draft}\togglefalse{draft}
\newtoggle{draft}\toggletrue{draft}
%\newtoggle{finished}\togglefalse{finished}

% https://tex.stackexchange.com/a/111851/18561
\DeclareSourcemap{
    \maps[datatype=bibtex]{
      \map{
        \step[fieldsource=checked]
        \step[fieldset=usera,origfieldval]
    }
  }
}

%\DeclareFieldFormat{usera}{\red{#1}}

% This shows the value of checked:
%\AtEveryBibitem{
%\csappto{blx@bbx@\thefield{entrytype}}{\iffieldundef{usera}{\space \red{Not checked!}}{\space\green{\printfield{usera}}}}
%}
% This just shows a warning for unchecked items
\AtEveryBibitem{
\csappto{blx@bbx@\thefield{entrytype}}{\iffieldundef{usera}{\space \red{Not checked!}}{}}
}


% load memoize before german.sty

%\usepackage{nomemoize} 
\usepackage{memoize} % The figures have been created with an earlier version of texlive. Recreating
                     % them changes the layout of the pages, so we have to rely on them. Unless ... 16.03.2023
%\memoizeset{readonly}
% see below for further settings

\input{localhyphenation.tex} % has to be loaded before german.sty
\input{localmetadata.tex}
\input{localpackages.tex}
\input{localcommands.tex}


\input{locallangscifixes.tex}


\usepackage[german]{varioref}
% do not stop and warn! This will be tested in the final version
\vrefwarning

\usepackage{pstricks,pst-node}
\psset{linewidth=.3pt}
\psset{nodesep=5pt}

\usepackage{tikz-qtree}
% has strange side effects
%\tikzset{every tree node/.style={align=left, anchor=north}}
\tikzset{every roof node/.append style={inner sep=0.1pt,text height=2ex,text depth=0.3ex}}


%\newcommand{\NOTE}[1]{}
\newcommand{\NOTE}[1]{\marginpar{#1}}

\memoizeset{
  memo filename prefix={hpsg.memo.dir/},
  register=\todo{O{}+m},
  prevent=\todo,
}


% \renewcommand{\itd}[1]{}
% \renewcommand{\itdobl}[1]{}
% \renewcommand{\itdopt}[1]{}

% \renewcommand{\addpages}{}
% \renewcommand{\addsource}{}
% \renewcommand{\addglosses}{}


%\bibliography{germanic}
\bibliography{bib-abbr,biblio-xdata-en,biblio}

%\includeonly{chapters/00-hpsg-vorwort}
%\includeonly{chapters/01-hpsg-einleitung}
%\includeonly{chapters/02-hpsg-formalismus}
%\includeonly{chapters/03-hpsg-valenz-psg}
%\includeonly{chapters/04-hpsg-komplementation}
\includeonly{chapters/05-hpsg-semantik}
%\includeonly{chapters/06-hpsg-adjunkte}
%\includeonly{chapters/07-hpsg-lexikon}
%\includeonly{chapters/08-hpsg-topologie}
%\includeonly{chapters/09-hpsg-konstituentenreihenfolge}
%\includeonly{chapters/10-hpsg-udc}
%\includeonly{chapters/11-hpsg-rs}
%\includeonly{chapters/12-hpsg-lokalitaet}
%\includeonly{chapters/13-hpsg-kongruenz}
%\includeonly{chapters/14-hpsg-kasus}
%\includeonly{chapters/15-hpsg-verbalkomplex}
%\includeonly{chapters/16-hpsg-anhebung}
%\includeonly{chapters/17-hpsg-passiv}
%\includeonly{chapters/18-hpsg-partikel}
%\includeonly{chapters/19-hpsg-morphologie}
%\includeonly{chapters/20-hpsg-theorie}
%\includeonly{chapters/hpsg-loesungen}


\input hpsg-lehrbuch-include

\end{document}

%%% Local Variables:
%%% TeX-command-extra-options: "-shell-escape"
%%% End:
